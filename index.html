<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Generador de presupuestos para electricista">
  <meta name="theme-color" content="#ffd43c">
  <title>Presupuestos - Braian Maglio Electricista</title>
  
  <link rel="manifest" href="manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Presupuestos">
  
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    #root { min-height: 100vh; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;
    
    const Plus = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" /></svg>;
    const Trash2 = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>;
    const FileText = () => <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>;
    const Download = () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>;
    const Settings = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>;
    const Edit2 = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>;
    const Save = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" /></svg>;
    const X = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>;

    function App() {
      const [datosNegocio] = useState({
        nombre: 'Braian Maglio Electricista',
        email: 'braianmaglio76@gmail.com',
        telefono: '+543487320738',
        direccion: ''
      });

      const [preciosManoObra, setPreciosManoObra] = useState([
        { id: 1, nombre: 'Cableado residencial', precio: 5000 },
        { id: 2, nombre: 'Instalación toma corriente', precio: 3000 },
        { id: 3, nombre: 'Instalación interruptor', precio: 2500 },
        { id: 4, nombre: 'Instalación luminaria', precio: 3500 },
        { id: 5, nombre: 'Tablero eléctrico', precio: 15000 },
        { id: 6, nombre: 'Puesta a tierra', precio: 8000 },
      ]);

      const [datosCliente, setDatosCliente] = useState({
        nombre: '', telefono: '', direccion: '', email: ''
      });

      const [items, setItems] = useState([]);
      const [descripcion, setDescripcion] = useState('');
      const [cantidad, setCantidad] = useState(1);
      const [precioUnitario, setPrecioUnitario] = useState('');
      const [tipo, setTipo] = useState('material');
      const [manoObraSeleccionada, setManoObraSeleccionada] = useState('');
      
      const [aplicarIVA, setAplicarIVA] = useState(false);
      const [porcentajeIVA, setPorcentajeIVA] = useState(21);
      const [aplicarDescuento, setAplicarDescuento] = useState(false);
      const [porcentajeDescuento, setPorcentajeDescuento] = useState(0);
      const [numeroPresupuesto, setNumeroPresupuesto] = useState('001');
      const [validezDias, setValidezDias] = useState(15);

      const [mostrarGestionPrecios, setMostrarGestionPrecios] = useState(false);
      const [editandoPrecio, setEditandoPrecio] = useState(null);
      const [nuevoNombreMO, setNuevoNombreMO] = useState('');
      const [nuevoPrecioMO, setNuevoPrecioMO] = useState('');

      const agregarPrecioManoObra = () => {
        if (nuevoNombreMO && nuevoPrecioMO > 0) {
          setPreciosManoObra([...preciosManoObra, {
            id: Date.now(),
            nombre: nuevoNombreMO,
            precio: parseFloat(nuevoPrecioMO)
          }]);
          setNuevoNombreMO('');
          setNuevoPrecioMO('');
        }
      };

      const eliminarPrecioManoObra = (id) => {
        setPreciosManoObra(preciosManoObra.filter(p => p.id !== id));
      };

      const actualizarPrecioManoObra = (id, nuevoNombre, nuevoPrecio) => {
        setPreciosManoObra(preciosManoObra.map(p => 
          p.id === id ? { ...p, nombre: nuevoNombre, precio: parseFloat(nuevoPrecio) } : p
        ));
        setEditandoPrecio(null);
      };

      const seleccionarManoObra = (e) => {
        const id = parseInt(e.target.value);
        setManoObraSeleccionada(id);
        if (id) {
          const precio = preciosManoObra.find(p => p.id === id);
          if (precio) {
            setDescripcion(precio.nombre);
            setPrecioUnitario(precio.precio);
          }
        } else {
          setDescripcion('');
          setPrecioUnitario('');
        }
      };

      const agregarItem = () => {
        if (descripcion && cantidad > 0 && precioUnitario > 0) {
          setItems([...items, {
            id: Date.now(),
            descripcion,
            cantidad: parseFloat(cantidad),
            precioUnitario: parseFloat(precioUnitario),
            tipo
          }]);
          setDescripcion('');
          setCantidad(1);
          setPrecioUnitario('');
          setManoObraSeleccionada('');
        }
      };

      const eliminarItem = (id) => {
        setItems(items.filter(item => item.id !== id));
      };

      const calcularSubtotal = () => {
        return items.reduce((sum, item) => sum + (item.cantidad * item.precioUnitario), 0);
      };

      const calcularDescuento = () => {
        if (!aplicarDescuento) return 0;
        return calcularSubtotal() * (porcentajeDescuento / 100);
      };

      const calcularIVA = () => {
        if (!aplicarIVA) return 0;
        return (calcularSubtotal() - calcularDescuento()) * (porcentajeIVA / 100);
      };

      const calcularTotal = () => {
        return calcularSubtotal() - calcularDescuento() + calcularIVA();
      };

      const generarPDF = () => {
        const ventana = window.open('', '_blank');
        const fecha = new Date().toLocaleDateString('es-AR');
        const validezHasta = new Date();
        validezHasta.setDate(validezHasta.getDate() + validezDias);
        
        const materiales = items.filter(item => item.tipo === 'material');
        const manoDeObra = items.filter(item => item.tipo === 'mano_obra');

        ventana.document.write(`
          <!DOCTYPE html>
          <html><head><meta charset="utf-8"><title>Presupuesto ${numeroPresupuesto}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: Arial, sans-serif; padding: 40px; color: #333; }
            .header { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #ffd43c; }
            .logo-section img { max-width: 200px; object-fit: contain; }
            .empresa-datos { font-size: 12px; color: #666; line-height: 1.6; margin-top: 10px; }
            .presupuesto-info { text-align: right; }
            .presupuesto-numero { font-size: 16px; font-weight: bold; color: #1f2937; margin-bottom: 5px; }
            .cliente-section { background: #fffbeb; padding: 20px; border-radius: 8px; margin-bottom: 30px; border: 2px solid #ffd43c; }
            .cliente-titulo { font-size: 14px; font-weight: bold; color: #1f2937; margin-bottom: 10px; text-transform: uppercase; }
            .seccion-titulo { font-size: 16px; font-weight: bold; color: #1f2937; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #ffd43c; }
            table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            th { background: #1f2937; color: white; padding: 12px; text-align: left; font-size: 12px; }
            td { padding: 10px 12px; border-bottom: 1px solid #e5e7eb; font-size: 13px; }
            .text-right { text-align: right; }
            .text-center { text-align: center; }
            .totales { margin-top: 30px; margin-left: auto; width: 350px; border: 2px solid #ffd43c; border-radius: 8px; overflow: hidden; }
            .total-row { display: flex; justify-content: space-between; padding: 12px 20px; border-bottom: 1px solid #fef3c7; }
            .total-row.subtotal { background: #fffbeb; }
            .total-row.descuento { background: #fef3c7; color: #92400e; }
            .total-row.iva { background: #dbeafe; }
            .total-row.total { background: #1f2937; color: #ffd43c; font-size: 18px; font-weight: bold; }
            .validez { background: #fffbeb; padding: 15px; border-radius: 8px; margin-top: 20px; text-align: center; color: #92400e; border: 2px solid #ffd43c; }
            .footer { margin-top: 50px; padding-top: 20px; border-top: 2px solid #ffd43c; font-size: 11px; color: #666; text-align: center; }
          </style></head><body>
          <div class="header">
            <div class="logo-section">
              <img src="logo.png" alt="${datosNegocio.nombre}" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
              <div style="display: none; font-size: 24px; font-weight: bold; color: #1f2937;">${datosNegocio.nombre}</div>
              <div class="empresa-datos">📧 ${datosNegocio.email}<br>📱 ${datosNegocio.telefono}</div>
            </div>
            <div class="presupuesto-info"><div class="presupuesto-numero">PRESUPUESTO N° ${numeroPresupuesto}</div>
            <div>Fecha: ${fecha}</div></div>
          </div>
          ${datosCliente.nombre ? `<div class="cliente-section"><div class="cliente-titulo">Datos del Cliente</div>
          <div><strong>Nombre:</strong> ${datosCliente.nombre}<br>
          ${datosCliente.telefono ? `<strong>Teléfono:</strong> ${datosCliente.telefono}<br>` : ''}
          ${datosCliente.email ? `<strong>Email:</strong> ${datosCliente.email}<br>` : ''}
          ${datosCliente.direccion ? `<strong>Dirección:</strong> ${datosCliente.direccion}` : ''}</div></div>` : ''}
          ${materiales.length > 0 ? `<div class="seccion-titulo">💡 Materiales</div><table><thead><tr>
          <th style="width: 50%">Descripción</th><th class="text-center">Cantidad</th>
          <th class="text-right">Precio Unit.</th><th class="text-right">Subtotal</th></tr></thead><tbody>
          ${materiales.map(item => `<tr><td>${item.descripcion}</td><td class="text-center">${item.cantidad}</td>
          <td class="text-right">$${item.precioUnitario.toLocaleString('es-AR', {minimumFractionDigits: 2})}</td>
          <td class="text-right">$${(item.cantidad * item.precioUnitario).toLocaleString('es-AR', {minimumFractionDigits: 2})}</td></tr>`).join('')}
          </tbody></table>` : ''}
          ${manoDeObra.length > 0 ? `<div class="seccion-titulo">🔧 Mano de Obra</div><table><thead><tr>
          <th style="width: 50%">Descripción</th><th class="text-center">Cantidad</th>
          <th class="text-right">Precio Unit.</th><th class="text-right">Subtotal</th></tr></thead><tbody>
          ${manoDeObra.map(item => `<tr><td>${item.descripcion}</td><td class="text-center">${item.cantidad}</td>
          <td class="text-right">$${item.precioUnitario.toLocaleString('es-AR', {minimumFractionDigits: 2})}</td>
          <td class="text-right">$${(item.cantidad * item.precioUnitario).toLocaleString('es-AR', {minimumFractionDigits: 2})}</td></tr>`).join('')}
          </tbody></table>` : ''}
          <div class="totales">
            <div class="total-row subtotal"><span>Subtotal</span><strong>$${calcularSubtotal().toLocaleString('es-AR', {minimumFractionDigits: 2})}</strong></div>
            ${aplicarDescuento ? `<div class="total-row descuento"><span>Descuento (${porcentajeDescuento}%)</span>
            <strong>-$${calcularDescuento().toLocaleString('es-AR', {minimumFractionDigits: 2})}</strong></div>` : ''}
            ${aplicarIVA ? `<div class="total-row iva"><span>IVA (${porcentajeIVA}%)</span>
            <strong>$${calcularIVA().toLocaleString('es-AR', {minimumFractionDigits: 2})}</strong></div>` : ''}
            <div class="total-row total"><span>TOTAL</span><strong>$${calcularTotal().toLocaleString('es-AR', {minimumFractionDigits: 2})}</strong></div>
          </div>
          <div class="validez">⏰ Presupuesto válido hasta: ${validezHasta.toLocaleDateString('es-AR')} (${validezDias} días)</div>
          <div class="footer">Este presupuesto no constituye una factura oficial<br>Generado el ${fecha} | ${datosNegocio.nombre}</div>
          <script>window.onload = function() { window.print(); }<\/script>
          </body></html>
        `);
        ventana.document.close();
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-yellow-50 to-amber-100 p-4">
          <div className="max-w-6xl mx-auto">
            <div className="bg-white rounded-lg shadow-xl p-6 mb-6">
              <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-3">
                  <FileText />
                  <h1 className="text-2xl md:text-3xl font-bold text-gray-800">Presupuestos</h1>
                </div>
                <button onClick={() => setMostrarGestionPrecios(!mostrarGestionPrecios)}
                  className="flex items-center gap-2 bg-amber-600 hover:bg-amber-700 text-white px-3 py-2 rounded-lg text-sm">
                  <Settings /> Precios
                </button>
              </div>

              {mostrarGestionPrecios && (
                <div className="bg-amber-50 rounded-lg p-4 mb-6 border-2 border-amber-300">
                  <h2 className="text-lg font-bold text-gray-900 mb-4">🔧 Lista de Precios</h2>
                  <div className="bg-white rounded-lg p-3 mb-3">
                    <div className="flex gap-2 flex-col sm:flex-row">
                      <input type="text" placeholder="Nombre del trabajo" value={nuevoNombreMO}
                        onChange={(e) => setNuevoNombreMO(e.target.value)}
                        className="flex-1 px-3 py-2 border rounded-lg text-sm" />
                      <input type="number" placeholder="Precio" value={nuevoPrecioMO}
                        onChange={(e) => setNuevoPrecioMO(e.target.value)}
                        className="w-full sm:w-28 px-3 py-2 border rounded-lg text-sm" />
                      <button onClick={agregarPrecioManoObra}
                        className="bg-amber-600 text-white px-3 py-2 rounded-lg flex items-center justify-center gap-2">
                        <Plus /> Agregar
                      </button>
                    </div>
                  </div>
                  <div className="space-y-2">
                    {preciosManoObra.map(precio => (
                      <div key={precio.id} className="bg-white rounded-lg p-3 flex items-center justify-between text-sm">
                        {editandoPrecio === precio.id ? (
                          <>
                            <input type="text" defaultValue={precio.nombre} id={`nombre-${precio.id}`}
                              className="flex-1 px-2 py-1 border rounded mr-2 text-sm" />
                            <input type="number" defaultValue={precio.precio} id={`precio-${precio.id}`}
                              className="w-24 px-2 py-1 border rounded mr-2 text-sm" />
                            <button onClick={() => {
                              actualizarPrecioManoObra(precio.id, 
                                document.getElementById(`nombre-${precio.id}`).value,
                                document.getElementById(`precio-${precio.id}`).value);
                            }} className="text-green-600 mr-2"><Save /></button>
                            <button onClick={() => setEditandoPrecio(null)} className="text-gray-600"><X /></button>
                          </>
                        ) : (
                          <>
                            <span className="flex-1 font-medium">{precio.nombre}</span>
                            <span className="font-bold text-amber-700 mr-3">${precio.precio.toLocaleString('es-AR')}</span>
                            <button onClick={() => setEditandoPrecio(precio.id)} className="text-blue-600 mr-2"><Edit2 /></button>
                            <button onClick={() => eliminarPrecioManoObra(precio.id)} className="text-red-600"><Trash2 /></button>
                          </>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              )}

              <div className="bg-yellow-50 rounded-lg p-4 mb-6 border-2 border-yellow-300">
                <h2 className="text-lg font-bold text-gray-900 mb-3">📋 Datos del Cliente</h2>
                <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                  <input type="text" placeholder="Nombre del cliente" value={datosCliente.nombre}
                    onChange={(e) => setDatosCliente({...datosCliente, nombre: e.target.value})}
                    className="px-3 py-2 border rounded-lg text-sm" />
                  <input type="text" placeholder="Teléfono" value={datosCliente.telefono}
                    onChange={(e) => setDatosCliente({...datosCliente, telefono: e.target.value})}
                    className="px-3 py-2 border rounded-lg text-sm" />
                  <input type="email" placeholder="Email" value={datosCliente.email}
                    onChange={(e) => setDatosCliente({...datosCliente, email: e.target.value})}
                    className="px-3 py-2 border rounded-lg text-sm" />
                  <input type="text" placeholder="Dirección del trabajo" value={datosCliente.direccion}
                    onChange={(e) => setDatosCliente({...datosCliente, direccion: e.target.value})}
                    className="px-3 py-2 border rounded-lg text-sm" />
                </div>
              </div>

              <div className="bg-gray-50 rounded-lg p-4 mb-6">
                <h2 className="text-lg font-bold text-gray-800 mb-3">➕ Agregar Ítem</h2>
                <select value={tipo} onChange={(e) => {
                  setTipo(e.target.value);
                  setManoObraSeleccionada('');
                  setDescripcion('');
                  setPrecioUnitario('');
                }} className="w-full px-3 py-2 border-2 rounded-lg mb-3 font-semibold text-sm border-amber-300">
                  <option value="material">💡 Material</option>
                  <option value="mano_obra">🔧 Mano de Obra</option>
                </select>

                {tipo === 'mano_obra' && (
                  <select value={manoObraSeleccionada} onChange={seleccionarManoObra}
                    className="w-full px-3 py-2 border rounded-lg mb-3 text-sm">
                    <option value="">-- Seleccionar o escribir manual --</option>
                    {preciosManoObra.map(precio => (
                      <option key={precio.id} value={precio.id}>
                        {precio.nombre} - ${precio.precio.toLocaleString('es-AR')}
                      </option>
                    ))}
                  </select>
                )}

                <div className="grid grid-cols-2 sm:grid-cols-4 gap-2 mb-3">
                  <input type="text" placeholder="Descripción" value={descripcion}
                    onChange={(e) => setDescripcion(e.target.value)}
                    className="col-span-2 px-3 py-2 border rounded-lg text-sm" />
                  <input type="number" placeholder="Cant." value={cantidad}
                    onChange={(e) => setCantidad(e.target.value)}
                    className="px-3 py-2 border rounded-lg text-sm" />
                  <input type="number" placeholder="Precio" value={precioUnitario}
                    onChange={(e) => setPrecioUnitario(e.target.value)}
                    className="px-3 py-2 border rounded-lg text-sm" />
                </div>
                <button onClick={agregarItem}
                  className="w-full bg-gray-800 hover:bg-gray-900 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2">
                  <Plus /> Agregar Ítem
                </button>
              </div>

              {items.length > 0 && (
                <>
                  <div className="bg-white rounded-lg border mb-6 overflow-x-auto">
                    <table className="w-full text-sm">
                      <thead className="bg-gray-800 text-white">
                        <tr>
                          <th className="px-2 py-2 text-left">Tipo</th>
                          <th className="px-2 py-2 text-left">Descripción</th>
                          <th className="px-2 py-2 text-center">Cant.</th>
                          <th className="px-2 py-2 text-right">P.U.</th>
                          <th className="px-2 py-2 text-right">Subt.</th>
                          <th className="px-2 py-2"></th>
                        </tr>
                      </thead>
                      <tbody>
                        {items.map((item, i) => (
                          <tr key={item.id} className={i % 2 === 0 ? 'bg-gray-50' : ''}>
                            <td className="px-2 py-2">{item.tipo === 'material' ? '💡' : '🔧'}</td>
                            <td className="px-2 py-2">{item.descripcion}</td>
                            <td className="px-2 py-2 text-center">{item.cantidad}</td>
                            <td className="px-2 py-2 text-right">${item.precioUnitario.toLocaleString('es-AR')}</td>
                            <td className="px-2 py-2 text-right font-semibold">${(item.cantidad * item.precioUnitario).toLocaleString('es-AR')}</td>
                            <td className="px-2 py-2"><button onClick={() => eliminarItem(item.id)} className="text-red-600"><Trash2 /></button></td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>

                  <div className="grid md:grid-cols-2 gap-4 mb-6">
                    <div className="bg-yellow-50 rounded-lg p-4">
                      <h3 className="font-bold text-gray-800 mb-3 text-sm">💰 Ajustes</h3>
                      <div className="space-y-3">
                        <div className="flex items-center gap-2 text-sm">
                          <input type="checkbox" id="iva" checked={aplicarIVA}
                            onChange={(e) => setAplicarIVA(e.target.checked)} className="w-4 h-4" />
                          <label htmlFor="iva" className="font-semibold">IVA</label>
                          {aplicarIVA && (
                            <>
                              <input type="number" value={porcentajeIVA}
                                onChange={(e) => setPorcentajeIVA(parseFloat(e.target.value))}
                                className="w-16 px-2 py-1 border rounded text-sm" min="0" step="0.5" />
                              <span>%</span>
                            </>
                          )}
                        </div>
                        <div className="flex items-center gap-2 text-sm">
                          <input type="checkbox" id="desc" checked={aplicarDescuento}
                            onChange={(e) => setAplicarDescuento(e.target.checked)} className="w-4 h-4" />
                          <label htmlFor="desc" className="font-semibold">Descuento</label>
                          {aplicarDescuento && (
                            <>
                              <input type="number" value={porcentajeDescuento}
                                onChange={(e) => setPorcentajeDescuento(parseFloat(e.target.value))}
                                className="w-16 px-2 py-1 border rounded text-sm" min="0" max="100" step="0.5" />
                              <span>%</span>
                            </>
                          )}
                        </div>
                      </div>
                    </div>

                    <div className="bg-green-50 rounded-lg p-4">
                      <h3 className="font-bold text-gray-800 mb-3 text-sm">📄 Info Presupuesto</h3>
                      <div className="space-y-3">
                        <div>
                          <label className="block text-xs font-semibold mb-1">N° Presupuesto</label>
                          <input type="text" value={numeroPresupuesto}
                            onChange={(e) => setNumeroPresupuesto(e.target.value)}
                            className="w-full px-3 py-2 border rounded-lg text-sm" />
                        </div>
                        <div>
                          <label className="block text-xs font-semibold mb-1">Validez (días)</label>
                          <input type="number" value={validezDias}
                            onChange={(e) => setValidezDias(parseInt(e.target.value))}
                            className="w-full px-3 py-2 border rounded-lg text-sm" min="1" />
                        </div>
                      </div>
                    </div>
                  </div>

                  <div className="bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg p-4 mb-6">
                    <div className="space-y-2">
                      <div className="flex justify-between">
                        <span>Subtotal:</span>
                        <span className="font-bold">${calcularSubtotal().toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                      </div>
                      {aplicarDescuento && (
                        <div className="flex justify-between text-yellow-300">
                          <span>Descuento ({porcentajeDescuento}%):</span>
                          <span className="font-bold">-${calcularDescuento().toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                        </div>
                      )}
                      {aplicarIVA && (
                        <div className="flex justify-between">
                          <span>IVA ({porcentajeIVA}%):</span>
                          <span className="font-bold">${calcularIVA().toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                        </div>
                      )}
                      <div className="border-t-2 border-yellow-400 pt-2 flex justify-between text-xl">
                        <span className="font-bold">TOTAL:</span>
                        <span className="font-bold text-yellow-400">${calcularTotal().toLocaleString('es-AR', {minimumFractionDigits: 2})}</span>
                      </div>
                    </div>
                  </div>

                  <button onClick={generarPDF}
                    className="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-4 rounded-lg flex items-center justify-center gap-3 text-lg shadow-lg">
                    <Download /> Generar PDF
                  </button>
                </>
              )}
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js');
      });
    }
  </script>
</body>

</html>

